[
  {
    "objectID": "calgary-data.html",
    "href": "calgary-data.html",
    "title": "Calgary Building Permits",
    "section": "",
    "text": "Code\nimport pandas as pd\nimport requests\nimport plotly.express as px\n\ndata = requests.get(\"https://data.calgary.ca/resource/c2es-76ed.json\")\ndf = pd.DataFrame(data.json())\nfor col in ['applieddate', 'issueddate', 'completeddate']:\n    df[col] = pd.to_datetime(df[col])\ndf[\"year\"] = df.issueddate.dt.year\ndf = df[(df.year &gt; 2010) & (df.year &lt; 2024)]\n\npost_covid = df[df.year &gt;= 2020]\npre_covid = df[(df.year &lt; 2020) & (df.year &gt;= 2010)]\nCode\n\nlabels = {\n    'tti': \"Days to Approval\",\n    'ttc': \"Days to Complete(After Permit Issue)\",\n    'totaltime': \"Days to Complete(Total)\",\n    'costperdaytotal': \"Revenue Per Day (since Applied)\",\n    'costperday': \"Revenue Per Day (since issued)\",\n    'year': 'Year',\n    'workclass': \"Work Class\",\n    'contractorname': 'Contractor',\n    'permitnum': 'Number of Permits',\n    'permittype': 'Type of Permits',\n}"
  },
  {
    "objectID": "calgary-data.html#types-of-works",
    "href": "calgary-data.html#types-of-works",
    "title": "Calgary Building Permits",
    "section": "Types of works",
    "text": "Types of works\n\n\nCode\npx.line(df.groupby([\"year\", \"workclass\"]).permitnum.count().reset_index(), x='year', y='permitnum', color='workclass', labels=labels)\n\n\n                                                \n\n\nNew construction is now catching up to pre-2020 levels.\nAt the same time, alterations are in a slight decline.\n\n\nCode\npx.line(df.groupby([\"year\", \"permittype\"]).permitnum.count().reset_index(), x='year', y='permitnum', color='permittype', labels=labels)\n\n\n                                                \n\n\n\nTime To Approve\n\n\nCode\ndf[\"tti\"] = (df.issueddate - df.applieddate).dt.days\npx.line(df.groupby([\"year\", \"workclass\"]).tti.mean().reset_index(), x='year', y='tti', color='workclass', labels=labels)\n\n\n                                                \n\n\nIt looks like additions are taking a long time to approve. New work and alterations permits have a quicker time to approve time.\n\n\nTurnaround\n\n\nCode\ndf[\"ttc\"] = (df.completeddate - df.issueddate).dt.days\npx.line(df.groupby([\"year\", \"workclass\"]).ttc.mean().reset_index(), x='year', y='ttc', color='workclass', labels=labels)\n\n\n                                                \n\n\nNOTE: A large number of permits issued in 2023 have not been completed\nAlterations continue to be on the lower end of time to complete.\n\n\nTotal\n\n\nCode\ndf[\"totaltime\"] = (df.completeddate - df.applieddate).dt.days\npx.line(df.groupby([\"year\", \"workclass\"]).totaltime.mean().reset_index(), x='year', y='totaltime', color='workclass', labels=labels)\n\n\n                                                \n\n\nNOTE: Some permits issued in 2023 have not been completed\n\n\nRevenue\n\n\nCode\ndf_rev = df[[\"year\", \"workclass\", \"estprojectcost\", \"issueddate\", \"completeddate\", \"applieddate\", \"totaltime\", \"ttc\", \"permitnum\"]].dropna()\n\n\n\nRevenue per day\n\n\nCode\ndf_rev[\"costperday\"] = df_rev.estprojectcost.astype(float)/df_rev.ttc\npx.line(df_rev.groupby([\"year\", \"workclass\"]).costperday.mean().reset_index(), x='year', y='costperday', color='workclass', labels=labels)\n\n\n                                                \n\n\n\n\nCode\ndf_rev[\"costperdaytotal\"] = df_rev.estprojectcost.astype(float)/df_rev.totaltime\npx.line(df_rev.groupby([\"year\", \"workclass\"]).costperdaytotal.mean().reset_index(), x='year', y='costperdaytotal', color='workclass', labels=labels)\n\n\n                                                \n\n\nAlterations seem to have a quick turnaround aid high revenue.\n\n\nRevenue VS Time to Complete\n\n\nCode\npx.scatter(df_rev, x=\"totaltime\", y=\"costperdaytotal\", color=\"workclass\", hover_data=[\"permitnum\", \"year\"], labels={**labels, \"permitnum\": \"Permit Number\"})\n\n\n                                                \n\n\nRevenue vs turnround seems to show that Alterations have a high possibility for both revenue and throughput of projects. This could be good for sustaining an effort to introduce your brand to a new market by spreading word of mouth about your company."
  },
  {
    "objectID": "Mercator-data.html",
    "href": "Mercator-data.html",
    "title": "Mercator-data",
    "section": "",
    "text": "Calgary Building Permits\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nVancouver Development Permits\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "vancouver-data-source.html",
    "href": "vancouver-data-source.html",
    "title": "Vancouver Development Permits",
    "section": "",
    "text": "First I searched for open data. Many regions across Canada release data on systems like the Open Government Data Portal. BC has one and Vancouver has one.\nThe Vancouver data hub had one dataset but it only included building permits. As these are different from development permits, I continued my search.\nNext, I searched directly for development permits in Vancouver. I found the Shape your city page. This was missing a lot of info.\nFinally, I dug around with any construction permits in Vancouver and noticed that you could search for building permits. That search page contained other types of permits including development permits.\n\n\n\nVancouver has an open data portal. This is available via an api\nThis contains only building permits and only issued permits. Doesn’t work for our purposes. Maybe useful elsewhere.\n\n\n{\n\n    \"permitnumber\":\"DB-2016-01042\",\n    \"permitnumbercreateddate\":\"2016-07-12\",\n    \"issuedate\":\"2017-01-26\",\n    \"permitelapseddays\":198,\n    \"projectvalue\":15000,\n    \"typeofwork\":\"Demolition / Deconstruction\",\n    \"address\":\"2380 E 53RD AVENUE, Vancouver, BC V5S 1V8\",\n    \"projectdescription\":\"Low Density Housing - Demolition / Deconstruction - To demolish the existing one family dwelling building ($15,000) on this site.\",\n    \"permitcategory\":null,\n    \"applicant\":\"Dinkar Wason DBA: Yuvraj Properties Ltd\",\n    \"applicantaddress\":\"2380 E 53rd Ave Vancouver, BC V5S1V8\",\n    \"propertyuse\":[\n        \"Dwelling Uses\"\n    ]\n    ,\n    \"specificusecategory\":[\n        \"Single Detached House w/Sec Suite\"\n    ]\n    ,\n    \"buildingcontractor\":\"All Right Trucking 99 Ltd\",\n    \"buildingcontractoraddress\":null,\n    \"issueyear\":\"2017\",\n    \"geolocalarea\":\"Victoria-Fraserview\",\n    \"geom\":{\n        \"type\":\"Feature\",\n        \"geometry\":{\n            \"coordinates\":[\n                -123.0581336,\n                49.2210845\n            ]\n            ,\n            \"type\":\"Point\"\n        }\n        ,\n        \"properties\":{\n        }\n    }\n    ,\n    \"yearmonth\":\"2017-01\",\n    \"geo_point_2d\":{\n        \"lon\":-123.0581336,\n        \"lat\":49.2210845\n    }\n\n}\n\n\n\n\nHub for getting community feedback on projects. https://www.shapeyourcity.ca/development\nDoes not contain all the information required. Unknown refresh cadence. Does not work\n\n\n\nSearch page for existing building permits in Vancouver. https://plposweb.vancouver.ca/Public/Default.aspx?PosseMenuName=PC_Search\nSearchable by Address, Number, and Date. Contains all sorts of permits including development, building, electrical, gas, fire, Mechanical, and plumbing. Could also be useful elsewhere.\nSearching on the 8th of March gave me results for permit applications created that same day.\nSearching presents a table such as:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nType\nNumber\nLocation\nStatus\nCreated Date\nIssue Date\nCompleted Date\n\n\n\n\n[Go to Development Permit]\nDevelopment Permit\nDP-2024-00080\n675 W 10TH AVENUE, Vancouver, BC V5Z 1L3\nIn Review\nFeb 1, 2024\n\n\n\n\n[Go to Development Permit]\nDevelopment Permit\nDP-2024-00081\n2856 E 19TH AVENUE, Vancouver, BC V5M 2S7\nIn Review\nFeb 2, 2024\n\n\n\n\n[Go to Development Permit]\nDevelopment Permit\nDP-2024-00083\n1875 MAPLE STREET, Vancouver, BC V6J 3S8\nIn Review\nFeb 2, 2024\n\n\n\n\n[Go to Development Permit]\nDevelopment Permit\nDP-2024-00084\n3003 W 3RD AVENUE, Vancouver, BC V6K 1M9\nIn Review\nFeb 2, 2024\n\n\n\n\n[Go to Development Permit]\nDevelopment Permit\nDP-2024-00085\n1958 W 60TH AVENUE, Vancouver, BC V6P 2B1\nIn Review\nFeb 2, 2024\n\n\n\n\n[Go to Development Permit]\nDevelopment Permit\nDP-2024-00086\n1168 E 48TH AVENUE, Vancouver, BC V5W 2E7\nIn Review\nFeb 2, 2024\n\n\n\n\n[Go to Development Permit]\nDevelopment Permit\nDP-2024-00087\n688 W HASTINGS STREET, Vancouver, BC V6B 1P1\nIn Review\nFeb 2, 2024\n\n\n\n\n[Go to Development Permit]\nDevelopment Permit\nDP-2024-00088\n1138 DAVIE STREET, Vancouver, BC V6E 1N1\nIssued\nFeb 2, 2024\nMar 1, 2024\n\n\n\n[Go to Development Permit]\nDevelopment Permit\nDP-2024-00089\n136 W CORDOVA STREET, Vancouver, BC V6B 1E4\nIssued\nFeb 2, 2024\nMar 1, 2024\n\n\n\n\nThis table contains the status and number. The first element of a row is a link to the summary for that permit.\nOn that page we have the description and name:\n\n\n\nSnapshot_2024-03-09_15-14-59.png"
  },
  {
    "objectID": "vancouver-data-source.html#walkthrough-of-process",
    "href": "vancouver-data-source.html#walkthrough-of-process",
    "title": "Vancouver Development Permits",
    "section": "",
    "text": "First I searched for open data. Many regions across Canada release data on systems like the Open Government Data Portal. BC has one and Vancouver has one.\nThe Vancouver data hub had one dataset but it only included building permits. As these are different from development permits, I continued my search.\nNext, I searched directly for development permits in Vancouver. I found the Shape your city page. This was missing a lot of info.\nFinally, I dug around with any construction permits in Vancouver and noticed that you could search for building permits. That search page contained other types of permits including development permits.\n\n\n\nVancouver has an open data portal. This is available via an api\nThis contains only building permits and only issued permits. Doesn’t work for our purposes. Maybe useful elsewhere.\n\n\n{\n\n    \"permitnumber\":\"DB-2016-01042\",\n    \"permitnumbercreateddate\":\"2016-07-12\",\n    \"issuedate\":\"2017-01-26\",\n    \"permitelapseddays\":198,\n    \"projectvalue\":15000,\n    \"typeofwork\":\"Demolition / Deconstruction\",\n    \"address\":\"2380 E 53RD AVENUE, Vancouver, BC V5S 1V8\",\n    \"projectdescription\":\"Low Density Housing - Demolition / Deconstruction - To demolish the existing one family dwelling building ($15,000) on this site.\",\n    \"permitcategory\":null,\n    \"applicant\":\"Dinkar Wason DBA: Yuvraj Properties Ltd\",\n    \"applicantaddress\":\"2380 E 53rd Ave Vancouver, BC V5S1V8\",\n    \"propertyuse\":[\n        \"Dwelling Uses\"\n    ]\n    ,\n    \"specificusecategory\":[\n        \"Single Detached House w/Sec Suite\"\n    ]\n    ,\n    \"buildingcontractor\":\"All Right Trucking 99 Ltd\",\n    \"buildingcontractoraddress\":null,\n    \"issueyear\":\"2017\",\n    \"geolocalarea\":\"Victoria-Fraserview\",\n    \"geom\":{\n        \"type\":\"Feature\",\n        \"geometry\":{\n            \"coordinates\":[\n                -123.0581336,\n                49.2210845\n            ]\n            ,\n            \"type\":\"Point\"\n        }\n        ,\n        \"properties\":{\n        }\n    }\n    ,\n    \"yearmonth\":\"2017-01\",\n    \"geo_point_2d\":{\n        \"lon\":-123.0581336,\n        \"lat\":49.2210845\n    }\n\n}\n\n\n\n\nHub for getting community feedback on projects. https://www.shapeyourcity.ca/development\nDoes not contain all the information required. Unknown refresh cadence. Does not work\n\n\n\nSearch page for existing building permits in Vancouver. https://plposweb.vancouver.ca/Public/Default.aspx?PosseMenuName=PC_Search\nSearchable by Address, Number, and Date. Contains all sorts of permits including development, building, electrical, gas, fire, Mechanical, and plumbing. Could also be useful elsewhere.\nSearching on the 8th of March gave me results for permit applications created that same day.\nSearching presents a table such as:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nType\nNumber\nLocation\nStatus\nCreated Date\nIssue Date\nCompleted Date\n\n\n\n\n[Go to Development Permit]\nDevelopment Permit\nDP-2024-00080\n675 W 10TH AVENUE, Vancouver, BC V5Z 1L3\nIn Review\nFeb 1, 2024\n\n\n\n\n[Go to Development Permit]\nDevelopment Permit\nDP-2024-00081\n2856 E 19TH AVENUE, Vancouver, BC V5M 2S7\nIn Review\nFeb 2, 2024\n\n\n\n\n[Go to Development Permit]\nDevelopment Permit\nDP-2024-00083\n1875 MAPLE STREET, Vancouver, BC V6J 3S8\nIn Review\nFeb 2, 2024\n\n\n\n\n[Go to Development Permit]\nDevelopment Permit\nDP-2024-00084\n3003 W 3RD AVENUE, Vancouver, BC V6K 1M9\nIn Review\nFeb 2, 2024\n\n\n\n\n[Go to Development Permit]\nDevelopment Permit\nDP-2024-00085\n1958 W 60TH AVENUE, Vancouver, BC V6P 2B1\nIn Review\nFeb 2, 2024\n\n\n\n\n[Go to Development Permit]\nDevelopment Permit\nDP-2024-00086\n1168 E 48TH AVENUE, Vancouver, BC V5W 2E7\nIn Review\nFeb 2, 2024\n\n\n\n\n[Go to Development Permit]\nDevelopment Permit\nDP-2024-00087\n688 W HASTINGS STREET, Vancouver, BC V6B 1P1\nIn Review\nFeb 2, 2024\n\n\n\n\n[Go to Development Permit]\nDevelopment Permit\nDP-2024-00088\n1138 DAVIE STREET, Vancouver, BC V6E 1N1\nIssued\nFeb 2, 2024\nMar 1, 2024\n\n\n\n[Go to Development Permit]\nDevelopment Permit\nDP-2024-00089\n136 W CORDOVA STREET, Vancouver, BC V6B 1E4\nIssued\nFeb 2, 2024\nMar 1, 2024\n\n\n\n\nThis table contains the status and number. The first element of a row is a link to the summary for that permit.\nOn that page we have the description and name:\n\n\n\nSnapshot_2024-03-09_15-14-59.png"
  },
  {
    "objectID": "vancouver-data-source.html#scraping-data-source",
    "href": "vancouver-data-source.html#scraping-data-source",
    "title": "Vancouver Development Permits",
    "section": "Scraping Data Source",
    "text": "Scraping Data Source\nThe usable data source seems to be the City of Vancouver services.\n\ndata is not url encoded\n\ncannot create url to hit for data\n\nrequest seems to be encoded in request\n\n    {\n    \"currentpaneid\": \"1018439\",\n    \"paneid\": \"987904\",\n    \"functiondef\": \"5\",\n    \"sortcolumns\": \"{}\",\n    \"datachanges\": \"'IExLXUXlhCFH7WLxLBCLTt%2BTaIGgB2UfCultdsikudSDKAl51KfZ0RHTmsa6vUol0PLPWTlZr4OlMU7ApiVDU9Dg0kd1zoMW7jbQLsLwqBw4oQjEgxXMtA7XFg3CoM/f9/oFYBwrgBm7wDc5lms3KV9tGIcjWlBVPRknGHjzBBmS2Bz868nSWV4zz5cqGSrIlFG/lpUi3nxUO6A5/uDpHQ4qFphafoXrzzLopN2nlW58fOZvOWJDSUFE0P2cK5E68FvSHCvfNQifn6O1XoclgQwVvNWdFxKXoWXyV3jN9DVSXjtfWSJVdS5GUlI5JXNe',('C','S0',972146,'2024-02-01+00:00:00'),('C','S0',984849,'2024-03-09+00:00:00'),('C','S0',1039023,'Development+Permit'),('C','S0',972146,'2024-02-01+00:00:00'),('C','S0',984849,'2024-03-09+00:00:00'),('F','ext-gen1009',0,0)\",\n    \"comesfrom\": \"posse\",\n    \"changesxml\": \"\",\n    \"changespending\": \"T\",\n    \"changesonobject\": \"\"\n}\nTuples at the end of the datachages field seem to encode the form data but it is not clear which of these map to each of the fields on screen.\nSelenium could be used to automate data scraping instead\n\nfrom selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.common.keys import Keys\nimport pandas as pd\nfrom time import sleep\n\ndriver = webdriver.Chrome()\n\ndriver.maximize_window()\n\ndriver.get(\"https://plposweb.vancouver.ca/Public/Default.aspx?PossePresentation=PermitSearchByDate\")\nfrom_field = driver.find_element(By.ID, \"CreatedDateFrom_1018439_S0\")\nfrom_field.send_keys(\"Jan 1, 2024\")\nfrom_field.send_keys(Keys.ENTER)\n\nto_field = driver.find_element(By.ID, \"CreatedDateTo_1018439_S0\")\nto_field.send_keys(\"Mar 30, 2024\")\nto_field.send_keys(Keys.ENTER)\n\ntype_field = driver.find_element(By.ID, \"ObjectDefDescription_1018439_S0\")\ntype_field.send_keys(\"Development Permit\")\ntype_field.send_keys(Keys.ENTER)\n\nsleep(2)\ndriver.save_screenshot(\"test.png\")\n\ntable = driver.find_element(By.TAG_NAME, \"table\")\n\nheader = table.find_element(By.TAG_NAME, \"thead\")\nheader_values = [\"link\"]\nfor elem in header.find_elements(By.TAG_NAME, \"th\")[1:]:\n    header_values.append(elem.text)\n    \nrows = []\nfor row in table.find_elements(By.TAG_NAME, \"tbody\")[:-1]:\n    cells = row.find_elements(By.TAG_NAME, \"td\")\n\n    link = cells[0].find_element(By.TAG_NAME, \"a\").get_dom_attribute(\"href\")\n    values = [link]\n    values.extend([cell.text for cell in cells[1:]])\n    rows.append(values)\n\ndf = pd.DataFrame(rows, columns = header_values)\n\n\ndf\n\n\n\n\n\n\n\n\n\nlink\nType\nNumber\nLocation\nStatus\nCreated Date\nIssue Date\nCompleted Date\n\n\n\n\n0\nhttps://plposweb.vancouver.ca/Public/Default.a...\nDevelopment Permit\nDP-2024-00002\n1090 W PENDER STREET, Vancouver, BC V6E 2N7\nCompleted\nJan 3, 2024\nJan 23, 2024\nFeb 1, 2024\n\n\n1\nhttps://plposweb.vancouver.ca/Public/Default.a...\nDevelopment Permit\nDP-2024-00003\n983 HELMCKEN STREET, Vancouver, BC V6Z 2S5\nIn Review\nJan 3, 2024\n\n\n\n\n2\nhttps://plposweb.vancouver.ca/Public/Default.a...\nDevelopment Permit\nDP-2024-00004\n1115 GRANVILLE STREET, Vancouver, BC V6Z 1M1\nIssued\nJan 3, 2024\nJan 30, 2024\n\n\n\n3\nhttps://plposweb.vancouver.ca/Public/Default.a...\nDevelopment Permit\nDP-2024-00005\n5504 VICTORIA DRIVE, Vancouver, BC V5P 3W1\nIn Review\nJan 3, 2024\n\n\n\n\n4\nhttps://plposweb.vancouver.ca/Public/Default.a...\nDevelopment Permit\nDP-2024-00007\n7474 CULLODEN STREET, Vancouver, BC\nIn Review\nJan 5, 2024\n\n\n\n\n...\n...\n...\n...\n...\n...\n...\n...\n...\n\n\n118\nhttps://plposweb.vancouver.ca/Public/Default.a...\nDevelopment Permit\nDP-2024-00164\n3250 E 49TH AVENUE, Vancouver, BC V5S 1L3\nIn Review\nFeb 29, 2024\n\n\n\n\n119\nhttps://plposweb.vancouver.ca/Public/Default.a...\nDevelopment Permit\nDP-2024-00184\n601 KEEFER STREET, Vancouver, BC V6A 3V8\nIn Review\nMar 4, 2024\n\n\n\n\n120\nhttps://plposweb.vancouver.ca/Public/Default.a...\nDevelopment Permit\nDP-2024-00185\n388 SLOCAN STREET, Vancouver, BC\nIn Review\nMar 4, 2024\n\n\n\n\n121\nhttps://plposweb.vancouver.ca/Public/Default.a...\nDevelopment Permit\nDP-2024-00193\n2929 E 22ND AVENUE, Vancouver, BC V5M 2Y3\nIn Review\nMar 6, 2024\n\n\n\n\n122\nhttps://plposweb.vancouver.ca/Public/Default.a...\nDevelopment Permit\nDP-2024-00197\n1807 LARCH STREET, Vancouver, BC V6K 3N9\nIn Review\nMar 6, 2024\n\n\n\n\n\n\n123 rows × 8 columns\n\n\n\n\n\nScrapping remaining info\n\ndf[\"link\"][0]\n\n'https://plposweb.vancouver.ca/Public/Default.aspx?PossePresentation=Guest&PosseObjectId=221425296'\n\n\n\n\n\nSnapshot_2024-03-09_15-45-56.png\n\n\nThis time the data is encoded in the url. BeutifulSoup can be used to scrape these pages quickly."
  }
]